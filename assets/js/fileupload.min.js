jQuery(document).ready(function(d){function g(k){d(".peek-a-bar").hide().remove();var j=new d.peekABar({padding:"1em",animation:{type:"fade",duration:1000},cssClass:"ssp-notification-bar",backgroundColor:"#4aa3df"});j.show({html:k})}function a(k){var j=k.type;var l=j.split("/");var m=false;if("audio"==l[0]||"video"==l[0]){m=true}return m}if(typeof upload_credentials!="undefined"){var b=upload_credentials.bucket;var h=upload_credentials.show_slug;var i=upload_credentials.access_key_id;var f=upload_credentials.policy;var c=upload_credentials.signature;var e=new plupload.Uploader({runtimes:"html5",browse_button:"ssp_select_file",multi_selection:false,container:"ssp_upload_container",url:"https://"+b+".s3.amazonaws.com:443/",multipart_params:{key:h+"/${filename}",Filename:h+"/${filename}",acl:"public-read","Content-Type":"",AWSAccessKeyId:i,policy:f,signature:c}});e.init();e.bind("Init",function(){d("#ssp_upload_notification").remove()});e.bind("FilesAdded",function(j,l){console.log(l);var k=l[0];if(a(k)){g('Uploading file to Seriously Simple Hosting. You can continue editing this post while the file uploads. <b id="ssp_upload_progress"></b>');e.start()}else{g("You have selected an invalid file type, please select a valid audio or video file.")}});e.bind("Error",function(j,k){alert("Error #"+k.code+": "+k.message)});e.bind("UploadProgress",function(j,k){d("#ssp_upload_progress").html(k.percent+"%")});e.bind("UploadComplete",function(j,k){g("Uploading file to Seriously Simple Hosting Complete.");d("#upload_audio_file").val("https://s3.amazonaws.com/"+b+"/"+h+"/"+k[0].name);d(".peek-a-bar").fadeOut(5000)})}});