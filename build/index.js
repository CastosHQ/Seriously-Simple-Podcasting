!function(e){var t={};function o(r){if(t[r])return t[r].exports;var n=t[r]={i:r,l:!1,exports:{}};return e[r].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=t,o.d=function(e,t,r){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)o.d(r,n,function(t){return e[t]}.bind(null,n));return r},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=10)}([function(e,t){!function(){e.exports=this.wp.element}()},function(e,t){function o(t){return e.exports=o=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},o(t)}e.exports=o},function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},function(e,t){function o(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}e.exports=function(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e}},function(e,t,o){var r=o(7);e.exports=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&r(e,t)}},function(e,t,o){var r=o(8),n=o(9);e.exports=function(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?n(e):t}},function(e,t){!function(){e.exports=this.wp.blocks}()},function(e,t){function o(t,r){return e.exports=o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},o(t,r)}e.exports=o},function(e,t){function o(t){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?e.exports=o=function(e){return typeof e}:e.exports=o=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(t)}e.exports=o},function(e,t){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}},function(e,t,o){"use strict";o.r(t);var r=o(0),n=o(6),s=o(2),a=o.n(s),i=o(3),c=o.n(i),l=o(4),p=o.n(l),u=o(5),d=o.n(u),f=o(1),m=o.n(f);function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var o,r=m()(e);if(t){var n=m()(this).constructor;o=Reflect.construct(r,arguments,n)}else o=r.apply(this,arguments);return d()(this,o)}}var y=function(e){p()(o,e);var t=b(o);function o(){return a()(this,o),t.apply(this,arguments)}return c()(o,[{key:"render",value:function(){var e={overflow:"hidden"},t={background:"url("+this.props.episodeImage+")",WebkitBackgroundSize:"cover",backgroundSize:"cover"};return Object(r.createElement)("div",{className:this.props.className},Object(r.createElement)("div",{className:"ssp-player ssp-player-large","data-player-instance-number":"1","data-player-waveform-colour":"#fff","data-player-waveform-progress-colour":"#00d4f7","data-source-file":this.props.episodeFileUrl,id:"ssp_player_id_1",style:{background:"#222222"}},Object(r.createElement)("div",{className:"ssp-album-art-container"},Object(r.createElement)("div",{className:"ssp-album-art",style:t})),Object(r.createElement)("div",{style:e},Object(r.createElement)("div",{className:"ssp-player-inner",style:e},Object(r.createElement)("div",{className:"ssp-player-info"},Object(r.createElement)("div",{style:{width:"80%",float:"left"}},Object(r.createElement)("h3",{className:"ssp-player-title episode-title"},this.props.episodeTitle)),Object(r.createElement)("div",{className:"ssp-download-episode",style:{overflow:"hidden",textAlign:"right"}}),Object(r.createElement)("div",null," "),Object(r.createElement)("div",{className:"ssp-media-player"},Object(r.createElement)("div",{className:"ssp-custom-player-controls"},Object(r.createElement)("div",{className:"ssp-play-pause",id:"ssp-play-pause"},Object(r.createElement)("span",{className:"ssp-icon ssp-icon-play_icon"}," ")),Object(r.createElement)("div",{className:"ssp-wave-form"},Object(r.createElement)("div",{className:"ssp-inner"},Object(r.createElement)("div",{"data-waveform-id":"waveform_1",id:"waveform1",className:"ssp-wave"}))),Object(r.createElement)("div",{className:"ssp-time-volume"},Object(r.createElement)("div",{className:"ssp-duration"},Object(r.createElement)("span",{id:"sspPlayedDuration"},"00:00")," / ",Object(r.createElement)("span",{id:"sspTotalDuration"},this.props.episodeDuration)),Object(r.createElement)("div",{className:"ssp-volume"},Object(r.createElement)("div",{className:"ssp-back-thirty-container"},Object(r.createElement)("div",{className:"ssp-back-thirty-control",id:"ssp-back-thirty"},Object(r.createElement)("i",{className:"ssp-icon icon-replay"}," "))),Object(r.createElement)("div",{className:"ssp-playback-speed-label-container"},Object(r.createElement)("div",{className:"ssp-playback-speed-label-wrapper"},Object(r.createElement)("span",{"data-playback-speed-id":"ssp_playback_speed_1",id:"ssp_playback_speed1","data-ssp-playback-rate":1},"1X"))),Object(r.createElement)("div",{className:"ssp-download-container"},Object(r.createElement)("div",{className:"ssp-download-control"},Object(r.createElement)("a",{className:"ssp-episode-download",href:this.props.episodeDownloadUrl,target:"_blank",rel:"noopener noreferrer"},Object(r.createElement)("i",{className:"ssp-icon icon-cloud-download"}," ")))))))))))))}}]),o}(r.Component);function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var o,r=m()(e);if(t){var n=m()(this).constructor;o=Reflect.construct(r,arguments,n)}else o=r.apply(this,arguments);return d()(this,o)}}var O=wp.i18n.__,h=wp.element.Component,j=wp.blockEditor.BlockControls,g=wp.components,E=g.Button,w=g.Toolbar,N=wp.apiFetch,_=function(e){p()(o,e);var t=v(o);function o(e){var r,n=e.className;a()(this,o),(r=t.apply(this,arguments)).episodeRef=React.createRef();var s={episodeImage:r.props.attributes.image||"",episodeFileUrl:r.props.attributes.file||"",episodeTitle:r.props.attributes.title||"",episodeDuration:r.props.attributes.duration||"",episodeDownloadUrl:r.props.attributes.download||""},i=!0;return r.props.attributes.title&&(i=!1),r.state={editing:i,className:n,episodes:[],episode:s},r}return c()(o,[{key:"render",value:function(){var e=this,t=this.state,o=t.editing,n=t.episodes,s=this.props.setAttributes,a=Object(r.createElement)(j,{key:"controls"},Object(r.createElement)(w,null,Object(r.createElement)(E,{className:"components-icon-button components-toolbar__control",label:O("Select Podcast","seriously-simple-podcasting"),onClick:function(){e.setState({editing:!0})},icon:"edit"})));return o?(0===n.length&&N({path:"ssp/v1/episodes"}).then((function(t){var o=[];Object.keys(t).map((function(e){var r={id:t[e].id,title:t[e].title.rendered};o.push(r)})),e.setState({episodes:o})})),Object(r.createElement)("div",{className:this.state.className},"Select podcast Episode",Object(r.createElement)("select",{ref:this.episodeRef},this.state.episodes.map((function(e,t){return Object(r.createElement)("option",{value:e.id},e.title)}))),Object(r.createElement)("button",{onClick:function(){var t=e.episodeRef.current.value;N({path:"ssp/v1/episodes?include="+t}).then((function(o){var r={episodeId:t,episodeImage:o[0].episode_player_image,episodeFileUrl:o[0].meta.audio_file,episodeTitle:o[0].title.rendered,episodeDuration:o[0].meta.duration,episodeDownloadUrl:o[0].download_link};e.setState({episode:r,editing:!1}),s({id:t,image:r.episodeImage,file:r.episodeFileUrl,title:r.episodeTitle,duration:r.episodeDuration,download:r.episodeDownloadUrl})}))}},"Go"))):[a,Object(r.createElement)(y,{className:this.state.className,episodeImage:this.state.episode.episodeImage,episodeFileUrl:this.state.episode.episodeFileUrl,episodeTitle:this.state.episode.episodeTitle,episodeDuration:this.state.episode.episodeDuration,episodeDownloadUrl:this.state.episode.episodeDownloadUrl})]}}]),o}(h);Object(n.registerBlockType)("seriously-simple-podcasting/castos-player",{title:"Castos Player",icon:"controls-volumeon",category:"layout",supports:{multiple:!1},attributes:{id:{type:"number"},image:{type:"string"},file:{type:"string"},title:{type:"string"},duration:{type:"string"},download:{type:"string"}},edit:_,save:function(e,t){var o=e.attributes,n=(o.id,o.image),s=o.file,a=o.title,i=o.duration,c=o.download;return Object(r.createElement)(y,{className:t,episodeImage:n,episodeFileUrl:s,episodeTitle:a,episodeDuration:i,episodeDownloadUrl:c})}})}]);