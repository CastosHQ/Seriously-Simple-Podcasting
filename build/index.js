!function(e){var t={};function o(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.m=e,o.c=t,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(n,r,function(t){return e[t]}.bind(null,r));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=10)}([function(e,t){!function(){e.exports=this.wp.element}()},function(e,t){function o(t){return e.exports=o=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},o(t)}e.exports=o},function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},function(e,t){function o(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}e.exports=function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}},function(e,t,o){var n=o(7);e.exports=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&n(e,t)}},function(e,t,o){var n=o(8),r=o(9);e.exports=function(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?r(e):t}},function(e,t){!function(){e.exports=this.wp.blocks}()},function(e,t){function o(t,n){return e.exports=o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},o(t,n)}e.exports=o},function(e,t){function o(t){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?e.exports=o=function(e){return typeof e}:e.exports=o=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(t)}e.exports=o},function(e,t){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}},function(e,t,o){"use strict";o.r(t);var n=o(0),r=o(6),s=o(2),i=o.n(s),a=o(3),c=o.n(a),l=o(4),p=o.n(l),d=o(5),u=o.n(d),f=o(1),m=o.n(f);function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var o,n=m()(e);if(t){var r=m()(this).constructor;o=Reflect.construct(n,arguments,r)}else o=n.apply(this,arguments);return u()(this,o)}}var y=function(e){p()(o,e);var t=b(o);function o(){return i()(this,o),t.apply(this,arguments)}return c()(o,[{key:"render",value:function(){var e={overflow:"hidden"},t={background:"url("+this.props.episodeImage+")",WebkitBackgroundSize:"cover",backgroundSize:"cover"};return Object(n.createElement)("div",{className:this.props.className},Object(n.createElement)("div",{className:"ssp-player ssp-player-large","data-player-instance-number":"1","data-player-waveform-colour":"#fff","data-player-waveform-progress-colour":"#00d4f7","data-source-file":this.props.episodeFileUrl,id:"ssp_player_id_1",style:{background:"#222222"}},Object(n.createElement)("div",{className:"ssp-album-art-container"},Object(n.createElement)("div",{className:"ssp-album-art",style:t})),Object(n.createElement)("div",{style:e},Object(n.createElement)("div",{className:"ssp-player-inner",style:e},Object(n.createElement)("div",{className:"ssp-player-info"},Object(n.createElement)("div",{style:{width:"80%",float:"left"}},Object(n.createElement)("h3",{className:"ssp-player-title episode-title"},this.props.episodeTitle)),Object(n.createElement)("div",{className:"ssp-download-episode",style:{overflow:"hidden",textAlign:"right"}}),Object(n.createElement)("div",null," "),Object(n.createElement)("div",{className:"ssp-media-player"},Object(n.createElement)("div",{className:"ssp-custom-player-controls"},Object(n.createElement)("div",{className:"ssp-play-pause",id:"ssp-play-pause"},Object(n.createElement)("span",{className:"ssp-icon ssp-icon-play_icon"}," ")),Object(n.createElement)("div",{className:"ssp-wave-form"},Object(n.createElement)("div",{className:"ssp-inner"},Object(n.createElement)("div",{"data-waveform-id":"waveform_1",id:"waveform1",className:"ssp-wave"},Object(n.createElement)("wave",{style:{display:"block",position:"relative",userSelect:"none",height:"8px",overflow:"hidden"}},Object(n.createElement)("wave",{style:{position:"absolute",zIndex:2,left:"0px",top:"0px",bottom:"0px",overflow:"hidden",width:"0px",display:"block",boxSizing:"border-box",borderRight:"1px solid rgb(51, 51, 51)"}},Object(n.createElement)("canvas",{style:{position:"absolute",left:"0px",top:"0px",bottom:"0px",height:"100%",width:"702px"},width:702,height:8})),Object(n.createElement)("canvas",{style:{position:"absolute",zIndex:1,left:"0px",top:"0px",bottom:"0px",height:"100%",width:"702px"},width:702,height:8}))))),Object(n.createElement)("div",{className:"ssp-time-volume"},Object(n.createElement)("div",{className:"ssp-duration"},Object(n.createElement)("span",{id:"sspPlayedDuration"},"00:00")," / ",Object(n.createElement)("span",{id:"sspTotalDuration"},this.props.episodeDuration)),Object(n.createElement)("div",{className:"ssp-volume"},Object(n.createElement)("div",{className:"ssp-back-thirty-container"},Object(n.createElement)("div",{className:"ssp-back-thirty-control",id:"ssp-back-thirty"},Object(n.createElement)("i",{className:"ssp-icon icon-replay"}," "))),Object(n.createElement)("div",{className:"ssp-playback-speed-label-container"},Object(n.createElement)("div",{className:"ssp-playback-speed-label-wrapper"},Object(n.createElement)("span",{"data-playback-speed-id":"ssp_playback_speed_1",id:"ssp_playback_speed1","data-ssp-playback-rate":1},"1X"))),Object(n.createElement)("div",{className:"ssp-download-container"},Object(n.createElement)("div",{className:"ssp-download-control"},Object(n.createElement)("a",{className:"ssp-episode-download",href:this.props.episodeDownloadUrl,target:"_blank",rel:"noopener noreferrer"},Object(n.createElement)("i",{className:"ssp-icon icon-cloud-download"}," ")))))))))))))}}]),o}(n.Component);function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var o,n=m()(e);if(t){var r=m()(this).constructor;o=Reflect.construct(n,arguments,r)}else o=n.apply(this,arguments);return u()(this,o)}}var h=wp.i18n.__,O=wp.element.Component,j=wp.blockEditor.BlockControls,g=wp.components,w=g.Button,E=g.Toolbar,x=wp.apiFetch,N=function(e){p()(o,e);var t=v(o);function o(e){var n,r=e.className;i()(this,o),(n=t.apply(this,arguments)).episodeRef=React.createRef();var s={episodeImage:n.props.attributes.image||"",episodeFileUrl:n.props.attributes.file||"",episodeTitle:n.props.attributes.title||"",episodeDuration:n.props.attributes.duration||"",episodeDownloadUrl:n.props.attributes.download||""},a=!0;return n.props.attributes.title&&(a=!1),n.state={editing:a,className:r,episodes:[],episode:s},n}return c()(o,[{key:"render",value:function(){var e=this,t=this.state,o=t.editing,r=t.episodes,s=this.props.setAttributes,i=Object(n.createElement)(j,{key:"controls"},Object(n.createElement)(E,null,Object(n.createElement)(w,{className:"components-icon-button components-toolbar__control",label:h("Select Podcast","seriously-simple-podcasting"),onClick:function(){e.setState({editing:!0})},icon:"edit"})));return o?(0===r.length&&x({path:"ssp/v1/episodes"}).then((function(t){var o=[];Object.keys(t).map((function(e){var n={id:t[e].id,title:t[e].title.rendered};o.push(n)})),e.setState({episodes:o})})),Object(n.createElement)("div",{className:this.state.className},"Select podcast Episode",Object(n.createElement)("select",{ref:this.episodeRef},this.state.episodes.map((function(e,t){return Object(n.createElement)("option",{value:e.id},e.title)}))),Object(n.createElement)("button",{onClick:function(){var t=e.episodeRef.current.value;x({path:"ssp/v1/episodes?include="+t}).then((function(o){var n={episodeId:t,episodeImage:o[0].episode_player_image,episodeFileUrl:o[0].meta.audio_file,episodeTitle:o[0].title.rendered,episodeDuration:o[0].meta.duration,episodeDownloadUrl:o[0].download_link};e.setState({episode:n,editing:!1}),s({id:t,image:n.episodeImage,file:n.episodeFileUrl,title:n.episodeTitle,duration:n.episodeDuration,download:n.episodeDownloadUrl})}))}},"Go"))):[i,Object(n.createElement)(y,{className:this.state.className,episodeImage:this.state.episode.episodeImage,episodeFileUrl:this.state.episode.episodeFileUrl,episodeTitle:this.state.episode.episodeTitle,episodeDuration:this.state.episode.episodeDuration,episodeDownloadUrl:this.state.episode.episodeDownloadUrl})]}}]),o}(O);Object(r.registerBlockType)("seriously-simple-podcasting/castos-player",{title:"Castos Player",icon:"controls-volumeon",category:"layout",supports:{multiple:!1},attributes:{id:{type:"number"},image:{type:"string"},file:{type:"string"},title:{type:"string"},duration:{type:"string"},download:{type:"string"}},edit:N,save:function(e,t){var o=e.attributes,r=(o.id,o.image),s=o.file,i=o.title,a=o.duration,c=o.download;return Object(n.createElement)(y,{className:t,episodeImage:r,episodeFileUrl:s,episodeTitle:i,episodeDuration:a,episodeDownloadUrl:c})}})}]);