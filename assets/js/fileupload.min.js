jQuery(document).ready(function(b){function d(f){b(".peek-a-bar").hide().remove();var e=new b.peekABar({padding:"1em",animation:{type:"fade",duration:1000},cssClass:"ssp-notification-bar",backgroundColor:"#4aa3df"});e.show({html:f})}function a(f){var e=f.type;var g=e.split("/");var h=false;if("audio"==g[0]||"video"==g[0]){h=true}return h}var c=new plupload.Uploader({runtimes:"html5",browse_button:"ssp_select_file",multi_selection:false,container:"ssp_upload_container",url:"https://"+upload_credentials.bucket+".s3.amazonaws.com:443/",multipart_params:{key:"jons-podcast-on-staging/${filename}",Filename:"jons-podcast-on-staging/${filename}",acl:"public-read","Content-Type":"",AWSAccessKeyId:upload_credentials.access_key_id,policy:upload_credentials.policy,signature:upload_credentials.signature}});c.init();c.bind("Init",function(e,f){b("#ssp_upload_notification").remove()});c.bind("FilesAdded",function(e,g){console.log(g);var f=g[0];if(a(f)){d('Uploading file to Seriously Simple Hosting. You can continue editing this post while the file uploads.<b id="ssp_upload_progress"></b>');c.start()}else{d("You have selected an invalid file type, please select a valid audio or video file.")}return false});c.bind("Error",function(e,f){alert("Error #"+f.code+": "+f.message)});c.bind("UploadProgress",function(e,f){b("#ssp_upload_progress").html(f.percent+"%")});c.bind("UploadComplete",function(e,f){d("Uploading file to Seriously Simple Hosting Complete.");b("#upload_audio_file").val("https://s3.amazonaws.com/seriouslysimplestaging/jons-podcast-on-staging/"+f[0].name);b(".peek-a-bar").fadeOut(5000)})});